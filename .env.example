# ─── Server ───────────────────────────────────────────────────
PORT=3100
WEBHOOK_BASE_URL=https://comms.yourdomain.com
MCP_SERVER_NAME=agentos-comms
NODE_ENV=development
EDITION=community                    # community | enterprise | saas

# ─── Security ─────────────────────────────────────────────────
MASTER_SECURITY_TOKEN=           # Master token for admin access / agent registration
CREDENTIALS_ENCRYPTION_KEY=      # AES-256 key for encrypting provider credentials in DB
JWT_SECRET=                      # JWT signing secret for agent security tokens

# ─── Configuration Architecture ──────────────────────────────
IDENTITY_MODE=dedicated              # dedicated | shared | hybrid (only dedicated implemented)
ISOLATION_MODE=single-account        # single-account | per-agent-subaccount | per-customer-subaccount (only single-account implemented)

# ─── Agent Pool ───────────────────────────────────────────────
INITIAL_AGENT_POOL_SIZE=5

# ─── Telephony (Twilio) ──────────────────────────────────────
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=
TWILIO_API_KEY=                  # Created by setup script (or manually)
TWILIO_API_SECRET=               # Created by setup script (or manually)
# TWILIO_MESSAGING_SERVICE_SID=   # Required for A2P 10DLC SMS (create in Twilio console)

# ─── Email (add when Phase 6) ────────────────────────────────
# RESEND_API_KEY=re_...
# RESEND_SENDING_DOMAIN=agents.yourdomain.com

# ─── WhatsApp (add when Phase 7) ─────────────────────────────
# GREENAPI_INSTANCE_ID=           # GreenAPI instance (dev)
# GREENAPI_API_TOKEN=             # GreenAPI token (dev)

# ─── TTS ──────────────────────────────────────────────────────
# Dev: Edge TTS (free, no key needed)
# Production: uncomment ElevenLabs
# ELEVENLABS_API_KEY=
# ELEVENLABS_DEFAULT_VOICE=cgSgspJ2msm6clMCkdW9

# ─── Database ─────────────────────────────────────────────────
# Dev: SQLite (no config needed, uses local file)
# Production: uncomment for Neon/Postgres
# DATABASE_URL=postgresql://user:password@ep-xxx.region.neon.tech/dbname?sslmode=require

# ─── Provider Selection ──────────────────────────────────────
PROVIDER_TELEPHONY=twilio
PROVIDER_EMAIL=resend
PROVIDER_WHATSAPP=greenapi       # greenapi (dev) | twilio (production)
PROVIDER_TTS=edge-tts            # edge-tts (dev, free) | elevenlabs | wapi (production)
PROVIDER_STT=deepgram
PROVIDER_VOICE_ORCHESTRATION=twilio-conversation-relay  # twilio-conversation-relay | media-streams-diy | livekit
PROVIDER_DATABASE=sqlite         # sqlite (dev) | neon | supabase (production)
PROVIDER_STORAGE=local           # local (dev) | s3 | r2 (production)

# ─── Callback ────────────────────────────────────────────────
AGENTOS_CALLBACK_URL=https://api.yourdomain.com/agents/{agentId}/inbound

# ─── Rate Limit Defaults ─────────────────────────────────────
DEFAULT_MAX_ACTIONS_PER_MINUTE=10
DEFAULT_MAX_ACTIONS_PER_HOUR=100
DEFAULT_MAX_ACTIONS_PER_DAY=500
DEFAULT_MAX_SPEND_PER_DAY=10.00
DEFAULT_MAX_SPEND_PER_MONTH=100.00
DEFAULT_MAX_CALLS_PER_DAY_SAME_NUMBER=2

# ─── Admin Alerts (add when Phase 11) ────────────────────────
# ADMIN_WHATSAPP_NUMBER=+972...
# ADMIN_ALERT_MIN_SEVERITY=MEDIUM
# ADMIN_ALERT_QUIET_HOURS_START=23
# ADMIN_ALERT_QUIET_HOURS_END=7
# ADMIN_ALERT_TIMEZONE=Asia/Jerusalem
# ADMIN_TOKEN=

# ─── Security Hardening ──────────────────────────────────────
# CORS_ALLOWED_ORIGINS=https://your-frontend.com  # Comma-separated allowed origins (falls back to WEBHOOK_BASE_URL)
HTTP_RATE_LIMIT_PER_IP=60               # Max requests per IP per minute
HTTP_RATE_LIMIT_GLOBAL=100              # Max total requests per minute
# ADMIN_IP_ALLOWLIST=                   # Comma-separated IPs allowed to access /admin (empty = all)
# WEBHOOK_IP_ALLOWLIST=                 # Comma-separated IPs allowed to hit webhooks (empty = all)
# IP_DENYLIST=                          # Comma-separated IPs always blocked
ANOMALY_DETECTOR_ENABLED=true           # Volume spikes, brute force, rapid token rotation detection

# ─── Data Retention ─────────────────────────────────────────
DATA_RETENTION_ENABLED=true              # Enable automatic cleanup of old data
# RETENTION_MESSAGES_DAYS=90             # Days to keep message metadata
# RETENTION_USAGE_LOGS_DAYS=365          # Days to keep usage logs
# RETENTION_CALL_LOGS_DAYS=365           # Days to keep call logs
# RETENTION_VOICEMAIL_DAYS=30            # Days to keep voicemail messages
# RETENTION_OTP_DAYS=1                   # Days to keep expired OTP codes
# RETENTION_REVOKED_CONSENT_DAYS=730     # Days to keep revoked consent records (2 years)

# ─── Registration ───────────────────────────────────────────
# REGISTRATION_ENABLED=false                # Set to true to allow self-service registration
# REQUIRE_EMAIL_VERIFICATION=false          # Set to true to require OTP email verification (needs Resend)

# ─── Demo Mode ───────────────────────────────────────────────
DEMO_MODE=false
